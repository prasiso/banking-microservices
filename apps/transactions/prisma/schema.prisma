generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model client {
  id_client  Int           @id(map: "client_pk")
  name       String        @db.VarChar
  email      String        @unique(map: "client_unique") @db.VarChar
  agency     String?       @db.VarChar
  account    String?       @db.VarChar
  balance    Float         @default(100) @db.Real
  send       transaction[] @relation("transaction_id_client_sendToclient")
  receiver   transaction[] @relation("transaction_id_client_receiverToclient")
  created_at DateTime?     @default(now()) @db.Date
  updated_at DateTime?     @default(now()) @db.Date
}

model transaction {
  id_transaction     Int       @id(map: "transaction_pk") @default(autoincrement())
  id_client_send     Int
  id_client_receiver Int
  status             Status    @default(PENDING)
  amount             Float     @default(0)
  description        String?
  send               client    @relation("transaction_id_client_sendToclient", fields: [id_client_send], references: [id_client], onDelete: SetNull, onUpdate: NoAction, map: "transaction_client_fk")
  receiver           client    @relation("transaction_id_client_receiverToclient", fields: [id_client_receiver], references: [id_client], onDelete: SetNull, onUpdate: NoAction, map: "transaction_client_fk_1")
  created_at         DateTime? @default(now()) @db.Date
  updated_at         DateTime? @default(now()) @db.Date
}

enum Status {
  PENDING
  NO_BALANCE
  COMPLETED
}
